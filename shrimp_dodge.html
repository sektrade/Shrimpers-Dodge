<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8">
<title>Shrimp Dodge</title>
<style>
  body { margin:0; background:#001d3d; display:flex; justify-content:center; align-items:center; height:100vh; }
  canvas { background:linear-gradient(#003566,#001d3d); border-radius:16px; box-shadow:0 0 20px rgba(0,0,0,.4); }
</style>
</head>
<body>
<canvas id="game" width="400" height="600"></canvas>
<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const W = canvas.width, H = canvas.height;

// --- Karides görseli ---
// Buraya kendi base64 görselini koyabilirsin
const shrimpBase64 = null; 
let shrimpImg = new Image();
if (shrimpBase64) shrimpImg.src = shrimpBase64;

let shrimp = { x:W/2-25, y:H-100, w:50, h:50, speed:6 };

// --- Engel görselleri ---
const pan = new Image();
const knife = new Image();
const lemon = new Image();
pan.src = 'data:image/svg+xml;base64,'+btoa(`<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60"><circle cx="30" cy="30" r="25" fill="gray" stroke="black" stroke-width="4"/></svg>`);
knife.src = 'data:image/svg+xml;base64,'+btoa(`<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60"><rect x="25" y="5" width="10" height="50" fill="silver" stroke="black"/><rect x="20" y="50" width="20" height="8" fill="brown"/></svg>`);
lemon.src = 'data:image/svg+xml;base64,'+btoa(`<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60"><ellipse cx="30" cy="30" rx="25" ry="18" fill="yellow" stroke="orange" stroke-width="3"/></svg>`);

let obstacles = [];
let frame = 0;
let score = 0;
let playing = true;

function spawnObstacle(){
  const types = [pan,knife,lemon];
  const img = types[Math.floor(Math.random()*types.length)];
  const size = 50;
  obstacles.push({x:Math.random()*(W-size), y:-size, w:size, h:size, img:img, speed:3+Math.random()*3});
}

function update(){
  if(!playing) return;
  frame++;
  if(frame % 60 === 0) spawnObstacle();

  // Engelleri güncelle
  for(let i=obstacles.length-1;i>=0;i--){
    let ob = obstacles[i];
    ob.y += ob.speed;
    if(ob.y > H) obstacles.splice(i,1);
    // Çarpışma
    if(shrimp.x < ob.x+ob.w && shrimp.x+shrimp.w > ob.x && shrimp.y < ob.y+ob.h && shrimp.y+shrimp.h > ob.y){
      playing=false;
    }
  }

  // Skor
  score++;
}

function draw(){
  ctx.clearRect(0,0,W,H);

  // Karides
  if(shrimpBase64){
    ctx.drawImage(shrimpImg,shrimp.x,shrimp.y,shrimp.w,shrimp.h);
  } else {
    ctx.fillStyle = 'red';
    ctx.beginPath();
    ctx.ellipse(shrimp.x+shrimp.w/2,shrimp.y+shrimp.h/2,shrimp.w/2,shrimp.h/2,0,0,Math.PI*2);
    ctx.fill();
  }

  // Engeller
  obstacles.forEach(ob=>{
    ctx.drawImage(ob.img,ob.x,ob.y,ob.w,ob.h);
  });

  // Skor
  ctx.fillStyle = 'white';
  ctx.font = '20px sans-serif';
  ctx.fillText('Skor: '+score,10,25);

  if(!playing){
    ctx.fillStyle = 'rgba(0,0,0,0.5)';
    ctx.fillRect(0,0,W,H);
    ctx.fillStyle = 'white';
    ctx.font = '32px sans-serif';
    ctx.fillText('Game Over',W/2-80,H/2);
  }
}

function loop(){
  update();
  draw();
  requestAnimationFrame(loop);
}

// Kontroller
let keys={};
document.addEventListener('keydown',e=>{keys[e.code]=true;});
document.addEventListener('keyup',e=>{keys[e.code]=false;});

function control(){
  if(keys['ArrowLeft']) shrimp.x -= shrimp.speed;
  if(keys['ArrowRight']) shrimp.x += shrimp.speed;
  if(shrimp.x<0) shrimp.x=0;
  if(shrimp.x+shrimp.w>W) shrimp.x=W-shrimp.w;
  requestAnimationFrame(control);
}

loop();
control();
</script>
</body>
</html>
